function addShadow(){for(var e=["smart","J_match","J_accessories","J_around","J_recommend","J_hotReview","J_video"],t=0;t<e.length;t++)$("#"+e[t]).find("li").hover(function(){$(this).addClass("brick-item-active")},function(){$(this).removeClass("brick-item-active")})}function remEvent(){var e=$("#J_xmRecommendList"),t=$(".xm-recommend-wrapper"),n=(t.height(),e.width(),e.find("li").width()),i=e.find("li").size(),o=1,a=t.find("li").length,s=Math.ceil(a/5),r=$(".xm-recommend").width()+14;e.css({width:n*i+140+"px","margin-left":"0px"}),$(".control-next").on("click",function(){return e.is(":animated")||(o===s?e.animate({"margin-left":r+14}):e.animate({"margin-left":"-"+r}),$("#recommend").find(".control").eq(o).addClass("control-disable").siblings().removeClass("control-disable")),!1}),$(".control-prev").on("click",function(){return e.is(":animated")||(1===o?e.animate({"margin-left":"0px"}):(e.animate({"margin-left":"+="+r}),o--),$("#recommend").find(".control").eq(o-1).addClass("control-disable").siblings().removeClass("control-disable")),!1})}function rotationSlider(){var e=0,t=$(".slider-page"),n="",i=$(".xm-slider-control").find("a").size(),o=function(){$(".xm-slider-pagination").find("span").removeClass("active").eq(e).addClass("active"),$(".xm-slider-control").find("a").removeClass("active").eq(e).addClass("active")},a=function(){n=setInterval(function(){++e>=i&&(e=0),o()},3e3)};a(),t.hover(function(){clearInterval(n)},function(){a()}),t.on("click",function(){return e=$(this).index(),o(),!1}),$("#J_homeSlider").hover(function(){clearInterval(n)},function(){a()}),$("#J_btnNext").on("click",function(){return++e===i&&(e=0),o(),!1}),$("#J_btnPrevious").on("click",function(){return--e<0&&(e=i-1),o(),!1})}!function(){"use strict";function e(t,n,i){return("string"==typeof n?n:n.toString()).replace(t.define||a,function(e,n,o,a){return 0===n.indexOf("def.")&&(n=n.substring(4)),n in i||(":"===o?(t.defineParams&&a.replace(t.defineParams,function(e,t,o){i[n]={arg:t,text:o}}),n in i||(i[n]=a)):new Function("def","def['"+n+"']="+a)(i)),""}).replace(t.use||a,function(n,o){t.useParams&&(o=o.replace(t.useParams,function(e,t,n,o){if(i[n]&&i[n].arg&&o){var a=(n+":"+o).replace(/'|\\/g,"_");return i.__exp=i.__exp||{},i.__exp[a]=i[n].text.replace(new RegExp("(^|[^\\w$])"+i[n].arg+"([^\\w$])","g"),"$1"+o+"$2"),t+"def.__exp['"+a+"']"}}));var a=new Function("def","return "+o)(i);return a?e(t,a,i):a})}function t(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var n,i={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0};i.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}},n=function(){return this||(0,eval)("this")}(),"undefined"!=typeof module&&module.exports?module.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):n.doT=i;var o={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},a=/$^/;i.template=function(s,r,d){var c,l,h=(r=r||i.templateSettings).append?o.append:o.split,u=0,m=r.use||r.define?e(r,s,d||{}):s;m=("var out='"+(r.strip?m.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):m).replace(/'|\\/g,"\\$&").replace(r.interpolate||a,function(e,n){return h.start+t(n)+h.end}).replace(r.encode||a,function(e,n){return c=!0,h.startencode+t(n)+h.end}).replace(r.conditional||a,function(e,n,i){return n?i?"';}else if("+t(i)+"){out+='":"';}else{out+='":i?"';if("+t(i)+"){out+='":"';}out+='"}).replace(r.iterate||a,function(e,n,i,o){return n?(u+=1,l=o||"i"+u,n=t(n),"';var arr"+u+"="+n+";if(arr"+u+"){var "+i+","+l+"=-1,l"+u+"=arr"+u+".length-1;while("+l+"<l"+u+"){"+i+"=arr"+u+"["+l+"+=1];out+='"):"';} } out+='"}).replace(r.evaluate||a,function(e,n){return"';"+t(n)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),c&&(r.selfcontained||!n||n._encodeHTML||(n._encodeHTML=i.encodeHTMLSource(r.doNotSkipEncoded)),m="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+i.encodeHTMLSource.toString()+"("+(r.doNotSkipEncoded||"")+"));"+m);try{return new Function(r.varname,m)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+m),e}},i.compile=function(e,t){return i.template(e,null,t)}}(),function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one(e.support.transition.end,function(){n=!0});return setTimeout(function(){n||e(i).trigger(e.support.transition.end)},t),this},e(function(){e.support.transition=t()})}(jQuery),function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n,o=e(document).height();if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.css({width:"100%",height:o}).click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var i=e(this),o=i.data("modal"),a=e.extend({},e.fn.modal.defaults,i.data(),"object"==typeof n&&n);o||i.data("modal",o=new t(this,a)),"string"==typeof n?o[n]():a.show&&o.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),o=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),n.data());t.preventDefault(),o.modal(a).one("hide",function(){n.focus()})})}(window.jQuery),function(e){function t(t){function n(){for(var t=-1,n=e(document).scrollTop(),i=0,o=c.length;i<o&&n+s.viewport.height()>c[i];i+=1)t+=1;return t}function i(){var t=n();d!==t&&(d=t,r.filter(function(t){return t<=d&&!e(this).hasClass(s.visibleClass)}).addClass(s.visibleClass).trigger("visible.visibleWatcher"),s.onVisible(r.eq(d),d))}function o(){r.each(function(){var t=e(this).attr("data-offset")?Number(e(this).attr("data-offset")):s.offset,n=t%1==0?t:t*s.viewport.height();c.push(e(this).offset().top+n)}),i(),s.onLoad()}var a,s,r=e(this),d=-1,c=[];a={viewport:e(window),visibleClass:"is-visible",offset:300,onLoad:e.noop,onVisible:e.noop},s=e.extend({},a,t),o(),s.viewport.on({"scroll.visibleWatcher":i,"resize.visibleWatcher":o})}e.fn.visibleWatcher=function(e){return t.call(this,e),this}}(jQuery);var xmWebsite={loadlazy:function(){var e=$("#J_visibleWatcher"),t=$(".section",e);t.visibleWatcher({onVisible:function(e,n){t.filter(function(e){return e<=n+1}).addClass("preload").find("img").each(function(){var e=$(this).attr("data-src");$(this).attr("src",e)})}})},xmOfficialWebsite:function(){var e={sendAjax:function(e,t,n){$.ajax({url:e,dataType:t,success:n})}};e.sendAjax("/controller/xiaomi/xmWebsite.json","json",function(e){if(e&&0===e.code){var t=e.data,n=doT.template($("#js-sliderTemp").html())(t.slider);$("#J_sliderHtml").html(n),rotationSlider();var i=doT.template($("#js-sliderMapTemp").html())(t.sliderMap);$("#J_sliderMap").html(i);var o=doT.template($("#js-starTemp").html())(t.star);$("#J_homeStarGoods").html(o);var a=doT.template($("#J_xmWebsiteTemp").html()),s=doT.template($("#js-smartTemp").html())(t.smart);$("#smart").html(s);var r=a(t.match);$("#J_match").html(r);var d=a(t.accessorise);$("#J_accessories").html(d);var c=a(t.round);$("#J_around").html(c);var l=doT.template($("#J_recommendTemp").html())(t.recommend);$("#J_recommend").html(l),addShadow(),remEvent()}});e.sendAjax("/controller/xiaomi/hotReview.json","json",function(e){if(e&&0===e.code){var t=e.data,n=doT.template($("#J_hotReviewTemp").html())(t.hotReview);$("#J_hotReview").html(n)}});e.sendAjax("/controller/xiaomi/xmContent.json","json",function(e){if(e&&0===e.code){var t=e.data,n=doT.template($("#J_contentTemp").html()),i=n(t.book);$("#J_Book").html(i);var o=n(t.theme);$("#J_Theme").html(o);var a=n(t.game);$("#J_game").html(a);var s=n(t.app);$("#J_app").html(s),function(){for(var e=[$("#J_Book").find("li"),$("#J_Theme").find("li"),$("#J_game").find("li"),$("#J_app").find("li")],t=["book","theme","game","app"],n=0;n<e.length;n++){var i="";for(j=0;j<e[n].length;j++)0===j?i+='<span class="pager page-active"><em class="dot"></em></span>':i+='<span class="pager"><em class="dot">'+(j+1)+"</em></span>";var o=t[n];$("."+o).html(i)}}()}});e.sendAjax("/controller/xiaomi/video.json","json",function(e){if(e&&0===e.code){var t=e.data,n=doT.template($("#J_videoTemp").html())(t.video);$("#J_video").html(n),addShadow()}})},navTopEvent:function(){var e=$(".J_navMainList").find(".nav-item"),t=$("#J_navMenu");e.hover(function(){var e=$(this).find(".item-children").html();t.empty(),t.html(e),t.addClass("header-nav-menu-active").show()},function(){t.hide()}),t.hover(function(){$(this).show()},function(){$(this).hide()}),$("#J_categoryList").find("li").hover(function(){$("div.children",this).show()},function(){$("div.children",this).hide()}),$("#J_miniCartBtn").hover(function(){$(this).addClass("topbar-cart-active").parent().find("#shop_cart_lay").slideDown(200)},function(){$(this).removeClass("topbar-cart-active").parent().find("#shop_cart_lay").slideUp(200)})},addTabShadow:function(){for(var e=["smart","match","accessories","around"],t=0;t<e.length;t++)$("#"+e[t]).find(".tab-list li").hover(function(){$(this).addClass("tab-active").siblings().removeClass("tab-active");var e=$(this).index();$(this).parents("div.home-brick-box").find(".text-02-list").hide().eq(e).removeClass("hide").show().siblings().addClass("hide").hide()})},init:function(){this.loadlazy(),this.navTopEvent(),this.xmOfficialWebsite(),this.addTabShadow()}};$(document).ready(function(){xmWebsite.init(),$("#J_select").on("click",function(){$("#J_modalglobalSites").modal("show")})});