!function(){"use strict";function e(t,i,n){return("string"==typeof i?i:i.toString()).replace(t.define||s,function(e,i,o,s){return 0===i.indexOf("def.")&&(i=i.substring(4)),i in n||(":"===o?(t.defineParams&&s.replace(t.defineParams,function(e,t,o){n[i]={arg:t,text:o}}),i in n||(n[i]=s)):new Function("def","def['"+i+"']="+s)(n)),""}).replace(t.use||s,function(i,o){t.useParams&&(o=o.replace(t.useParams,function(e,t,i,o){if(n[i]&&n[i].arg&&o){var s=(i+":"+o).replace(/'|\\/g,"_");return n.__exp=n.__exp||{},n.__exp[s]=n[i].text.replace(new RegExp("(^|[^\\w$])"+n[i].arg+"([^\\w$])","g"),"$1"+o+"$2"),t+"def.__exp['"+s+"']"}}));var s=new Function("def","return "+o)(n);return s?e(t,s,n):s})}function t(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var i,n={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0};n.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(i,function(e){return t[e]||e}):""}},i=function(){return this||(0,eval)("this")}(),"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):i.doT=n;var o={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},s=/$^/;n.template=function(a,r,d){var u,c,l=(r=r||n.templateSettings).append?o.append:o.split,h=0,f=r.use||r.define?e(r,a,d||{}):a;f=("var out='"+(r.strip?f.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):f).replace(/'|\\/g,"\\$&").replace(r.interpolate||s,function(e,i){return l.start+t(i)+l.end}).replace(r.encode||s,function(e,i){return u=!0,l.startencode+t(i)+l.end}).replace(r.conditional||s,function(e,i,n){return i?n?"';}else if("+t(n)+"){out+='":"';}else{out+='":n?"';if("+t(n)+"){out+='":"';}out+='"}).replace(r.iterate||s,function(e,i,n,o){return i?(h+=1,c=o||"i"+h,i=t(i),"';var arr"+h+"="+i+";if(arr"+h+"){var "+n+","+c+"=-1,l"+h+"=arr"+h+".length-1;while("+c+"<l"+h+"){"+n+"=arr"+h+"["+c+"+=1];out+='"):"';} } out+='"}).replace(r.evaluate||s,function(e,i){return"';"+t(i)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),u&&(r.selfcontained||!i||i._encodeHTML||(i._encodeHTML=n.encodeHTMLSource(r.doNotSkipEncoded)),f="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+n.encodeHTMLSource.toString()+"("+(r.doNotSkipEncoded||"")+"));"+f);try{return new Function(r.varname,f)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+f),e}},n.compile=function(e,t){return n.template(e,null,t)}}(),function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one(e.support.transition.end,function(){i=!0});return setTimeout(function(){i||e(n).trigger(e.support.transition.end)},t),this},e(function(){e.support.transition=t()})}(jQuery),function(e){"use strict";var t=function(t,i){this.options=i,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,i=e.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),i&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),i?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,i=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(i),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&i,o=e(document).height();if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.css({width:"100%",height:o}).click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;n?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var i=e.fn.modal;e.fn.modal=function(i){return this.each(function(){var n=e(this),o=n.data("modal"),s=e.extend({},e.fn.modal.defaults,n.data(),"object"==typeof i&&i);o||n.data("modal",o=new t(this,s)),"string"==typeof i?o[i]():s.show&&o.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var i=e(this),n=i.attr("href"),o=e(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},o.data(),i.data());t.preventDefault(),o.modal(s).one("hide",function(){i.focus()})})}(window.jQuery),function(e){function t(t){function i(){for(var t=-1,i=e(document).scrollTop(),n=0,o=u.length;n<o&&i+a.viewport.height()>u[n];n+=1)t+=1;return t}function n(){var t=i();d!==t&&(d=t,r.filter(function(t){return t<=d&&!e(this).hasClass(a.visibleClass)}).addClass(a.visibleClass).trigger("visible.visibleWatcher"),a.onVisible(r.eq(d),d))}function o(){r.each(function(){var t=e(this).attr("data-offset")?Number(e(this).attr("data-offset")):a.offset,i=t%1==0?t:t*a.viewport.height();u.push(e(this).offset().top+i)}),n(),a.onLoad()}var s,a,r=e(this),d=-1,u=[];s={viewport:e(window),visibleClass:"is-visible",offset:300,onLoad:e.noop,onVisible:e.noop},a=e.extend({},s,t),o(),a.viewport.on({"scroll.visibleWatcher":n,"resize.visibleWatcher":o})}e.fn.visibleWatcher=function(e){return t.call(this,e),this}}(jQuery);var apiNav="/controller/hd_v06/api_nav.json",apiProduct="/controller/hd_v06/api_product.json",_common={sendAjax:function(e,t,i,n){$.ajax({url:e,data:t,dataType:i,success:n})}},lazyload=function(){var e=$("#J_newyear"),t=$(".section",e);t.visibleWatcher({onVisible:function(e,i){t.filter(function(e){return e<=i+1}).addClass("preload").find("img").each(function(){var e=$(this).attr("data-src");$(this).attr("src",e)})}})},navEvent=function(){var e=$("#J_nav"),t=e.offset().top,i=0,n="";$(window).on("scroll",function(){(i=$(this).scrollTop())>=t?e.addClass("fixed-nav"):e.removeClass("fixed-nav")}),e.find(".nav-items").on("click",function(){return $(this).addClass("active").siblings().removeClass("active"),(n=$(this).attr("data-target"))&&$(n).length&&$("html, body").animate({scrollTop:$(n).offset().top-e.height()},500),!1})},tabNavEvent=function(){var e=$("#J_life").find(".guide-a"),t=$("#J_life").find(".daliyuse-group");e.on("click",function(){$(this).addClass("active").siblings().removeClass("active");var e=$(this).index();return t.hide().eq(e).removeClass("hide").show().siblings().addClass("hide"),!1});var i=$("#J_home"),n=i.find(".home-guide a"),o=$("#J_homeList ul");n.on("click",function(){$(this).addClass("active").siblings().removeClass("active");var e=$(this).index();return o.hide().eq(e).removeClass("hide").show().siblings().addClass("hide"),!1});var s=i.find(".tv-guide a"),a=$("#J_tvList").find(".tv-group");s.on("click",function(){$(this).addClass("active").siblings().removeClass("active");var e=$(this).index();a.eq(e).addClass("mitv-current").siblings().removeClass("mitv-current")})},getCount=function(){var e=0,t=0,i=0,n=0,o=0;_common.sendAjax("//a.huodong.mi.com/nianhuo/zaobao/count",{},"jsonp",function(s){if(!s||0!==s.code)return!1;var a=s.data;e=a.miphone,t=a.five,i=a.smog,n=a.toy,o=a.walker,$("#J_miphone").text(e),$("#J_smog").text(i),$("#J_five").text(t),$("#J_walker").text(o),$("#J_toy").text(n)})};window.vm=new Vue({el:"#web",data:{headerDate:"活动时间：12月29日至1月3日",headerRule:"专题活动规则",headerReturn:"返回小米网",headerDesc:"明星商品限时开售，多款新品首卖",headerDesc1:"还可领超值优惠券",heikejiH1:"新年更有科技感",heikejiH2:"明星旗舰，限时开售",heikejiDesc:"挑选一份科技好礼，让生活更精彩",heikejiH2Phone:"挑选一部手机",heikejiH2Phone1:"挑选一台轻盈高性能的笔记本",lifeTitle:"新年生活更健康",lifeDesc:"用智能家居提升生活品质",lifeH2:"呼吸健康空气，抗霾必备",homeTitle:"新年居家更舒适",homeDesc:"用智能产品开启新的生活方式",homeH2:"新年要有好“看”的",tripTitle:"新年出行更时尚",tripDesc:"炫酷装备助您轻松出行",tripDesc1:"每种优惠券每位用户限领两张",tripH2:"运动也时尚",fashionTitle:"新年酷玩潮范儿足",fashionDesc:"挑选一件酷玩具，让生活充满惊喜",fashionDesc1:"每种优惠券每位用户限领两张",fashionH2:"酷玩新品，限时开售",navList:[],heikejiList:[],f2_kejishoujiList:[],f2_mibookList:[],jingoshuiqiUpList:[],jingoshuiqiDownList:[],f2_lifeList:[],jujiaHuanjingList:[],jujiaMeishiList:[],jujiaZhaomingList:[],jujiaShuimianList:[],jujiahaowuList:[],f2_tripList:[],chuxingList:[],listenList:[],kuwanList:[]}}),_common.sendAjax(apiNav,{},"json",function(e){if("result"!==e.code)return!1;var t=e.data;window.vm.navList=t.nav,_common.sendAjax(apiProduct,{},"json",function(e){if("result"!==e.code)return!1;var t=e.data;window.vm.heikejiList=t.heikeji,window.vm.f2_kejishoujiList=t.f2_kejishouji,window.vm.f2_mibookList=t.f2_mibook,window.vm.jingoshuiqiUpList=t.jingshuiqiUp,window.vm.jingoshuiqiDownList=t.jingshuiqiDown,window.vm.f2_lifeList=t.f2_life,window.vm.jujiaHuanjingList=t.jujiaHuanjing,window.vm.jujiaMeishiList=t.jujiaMeishi,window.vm.jujiaZhaomingList=t.jujiaZhaoming,window.vm.jujiaShuimianList=t.jujiaShuimian,window.vm.jujiahaowuList=t.jujiahaowu,window.vm.f2_tripList=t.f2_trip,window.vm.chuxingList=t.chuxing,window.vm.listenList=t.listen,window.vm.kuwanList=t.kuwan,lazyload(),navEvent(),tabNavEvent(),getCount()})});